%form{:method=>"post"}
    %h1="Connection Type"
    %select#connection_type{:name=>"connection_type"}
        - CONNECTION_METHODS.each do |cm|
            %option{:value=>cm.name,
                :selected=>(cm==connection_method.class)}=cm.description
    #connection
        #WiredConnection
            %h1="Wired Connection Settings"
            %p
                %label{:for=>"WiredConnection_interface_name"}="Interface Name"
                %select#interface_name{:name=>"WiredConnection/interface_name"}
                    %option{:value=>""}="Auto Select"
                    - WiredConnection.interfaces.each do |iface|
                        %option{:value=>iface.name, :selected=>value_from(connection_method, :interface_name)==iface.name}="#{iface.name} - #{iface.mac}"
        #WirelessConnection
            %h1="Wireless Connection Settings (no encryption)"
            %p
                %label{:for=>"WirelessConnection_interface_name"}="Interface Name"
                %select#interface_name{:name=>"WirelessConnection/interface_name"}
                    %option{:value=>""}="Auto Select"
                    - WirelessConnection.interfaces.each do |iface|
                        %option{:value=>iface.name, :selected=>value_from(connection_method, :interface_name) == iface.name}="#{iface.name} - #{iface.mac}"
            %p
                %label{:for=>"WirelessConnection_ssid"}="SSID"
                %input{:type=>"text", :name=>"WirelessConnection/ssid", 
                    :value=>value_from(connection_method, :ssid)}
    %h1="IP Address"
    %select#addressing_type{:name=>"addressing_type"}
        - ADDRESSING_METHODS.each do |am|
            %option{:value=>am.name,
                :selected=>(am==addressing_method.class)}=am.description
    #address
        #DHCPAddressing
        #StaticAddressing
            %h1="Static Address Settings"
            %p
                %label{:for=>"StaticAddressing_address"}="Address"
                %input{:type=>"text", :name=>"StaticAddressing/address",
                    :value=>value_from(addressing_method, :address)}
            %p
                %label{:for=>"StaticAddressing_netmask"}="Netmask"
                %input{:type=>"text", :name=>"StaticAddressing/netmask", 
                    :value=>value_from(addressing_method, :netmask)}
            %p
                %label{:for=>"StaticAddressing_gateway"}="Gateway"
                %input{:type=>"text", :name=>"StaticAddressing/gateway", 
                    :value=>value_from(addressing_method, :gateway)}
            %p
                %label{:for=>"StaticAddressing_address"}="Nameservers"
                %input{:type=>"text", :name=>"StaticAddressing/nameservers_flat", 
                    :value=>value_from(addressing_method, :nameservers_flat)}

    %input{:type=>"submit"}

